"use strict";process.env.NODE_ENV="testing";var webpack=require("webpack"),DevServer=require("webpack-dev-server"),webpackConfig=require("../../env/webpack.prod.conf"),devConfigPromise=require("../../run/run.dev.js"),server=void 0;devConfigPromise.then(function(e){var r=e.devServer,n=webpack(webpackConfig);server=new DevServer(n,r);var o=r.port,i=r.host;return server.listen(o,i)}).then(function(){var e=process.argv.slice(2);-1===e.indexOf("--config")&&(e=e.concat(["--config","build/test/e2e/nightwatch.conf.js"])),-1===e.indexOf("--env")&&(e=e.concat(["--env","chrome"]));var r=require("cross-spawn")("./node_modules/.bin/nightwatch",e,{stdio:"inherit"});r.on("exit",function(e){server.close(),process.exit(e)}),r.on("error",function(e){throw server.close(),e})});